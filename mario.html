
<html>
<head>
<script type="text/javascript">
  document.onkeydown = KeyCode;
  x= 300;
  y= 200;
  function KeyCode()
  { if(document.all)    kcode = event.keyCode;
    else if(document.getElementById)
        kcode = (event.keyCode)? event.keyCode: event.charCode;
    else if(document.layers)    kcode = event.which;
    switch(kcode)
    { case 0x25:
          changeIMGleft();
          if (x>1)  x-= 10;
          break;
      case 0x26:
          if (y>1)  y-= 10;
          break;
      case 0x27:
          changeIMGright();
          x+= 10;
          break;
      case 0x28:
          y+= 10;
          break;
    }
  }
  function moveImage()
  {
    document.Mario.style.left= x;
    document.Mario.style.top= y;
  }
  
  
  //画像を配列に格納する
var img = new Array();

img[0] = new Image();
img[0].src = "mario_1.png";
img[1] = new Image();
img[1].src = "mario_2.png";
img[2] = new Image();
img[2].src=  "mario_3.png";
img[3] = new Image();
img[3].src=  "mario_4.png";
img[4] = new Image();
img[4].src=  "mario_5.png";
img[5] = new Image();
img[5].src=  "mario_6.png";


//画像番号用のグローバル変数
var cnt=0;

//画像切り替え関数
 
function changeIMGright(){
  //getElementByIdが使える場合のみ後の処理をする
  if(document.getElementById)
  {

    //id属性が「mario」の画像タグの画像パスを切り替える
    if( 0 <= cnt && cnt <= 2 )
    {document.getElementById("mario").src = img[cnt].src;}

    //一つ画像を表示したらカウント用変数cntの値を＋１にする
    cnt++;
    
    //画像が最後まで表示されたか確認
    if( cnt <= 2 )
    {
      //まだ表示されていなければ、setTimeout()で次の画像を表示する
      var timer1=setTimeout("changeIMGright()",50);
    }
    else
    {
      //全て表示されていたら、最初にもどり、タイマーを停止する
      cnt=0;
      document.getElementById("mario").src = img[cnt].src;
      clearTimeout(timer1);
    }
  }
}


function changeIMGleft(){
  //getElementByIdが使える場合のみ後の処理をする
  if(document.getElementById)
  {

    //id属性が「mario」の画像タグの画像パスを切り替える
    if( 3 <= cnt && cnt <= 5 )
    {document.getElementById("mario").src = img[cnt].src;}

    //一つ画像を表示したらカウント用変数cntの値を＋１にする
    cnt++;
    
    //画像が最後まで表示されたか確認
    if( 3 <= cnt && cnt <= 5 )
    {
      //まだ表示されていなければ、setTimeout()で次の画像を表示する
      var timer1=setTimeout("changeIMGleft()",50);
    }
    else
    {
      //全て表示されていたら、最初に戻り、タイマーを停止する
      cnt=3;
      document.getElementById("mario").src = img[cnt].src;
      clearTimeout(timer1);
    }
  } 
}

function changeIMGSP(){
  x+= 10;
  //getElementByIdが使える場合のみ後の処理をする
  if(document.getElementById)
  {

    //id属性が「mario」の画像タグの画像パスを切り替える
    if( 0 <= cnt && cnt <= 2 )
    {document.getElementById("mario").src = img[cnt].src;}

    //一つ画像を表示したらカウント用変数cntの値を＋１にする
    cnt++;
    
    //画像が最後まで表示されたか確認
    if( cnt <= 2 )
    {
      //まだ表示されていなければ、setTimeout()で次の画像を表示する
      var timer1=setTimeout("changeIMGright()",50);
    }
    else
    {
      //全て表示されていたら、ボタンを押せるようにして、タイマーを停止する
      cnt=0;
      document.getElementById("mario").src = img[cnt].src;
      clearTimeout(timer1);
    }
  }
}

</script>
</head>
<body bgcolor="#f4f8ff" onLoad="setInterval('moveImage()',25)">

<h2>Super Mario</h2>
<img id = "mario" onclick ="changeIMGSP() "src="mario_1.png" 
     name="Mario" style="position:absolute;left:300px;top:200px;">

</body>
</html>
